<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=user_attributes" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/Menu/Menu.css">
</head>
<body>
    <header>
        <div class="row justify-content-between">
            <div class="col-12 col-md-4">
                <a href="Menu.html">
                    <img src="../Imagenes/nonnaLogo.png" class="img-fluid rounded-circle">
                </a>
            </div>
            <div class="col-12 col-md-4 d-flex align-items-center">
                <a href="Menu.html">Menú</a>
                <a href="Promociones.html">Promociones</a>
                <a href="../html/Compra/MetodoCompra.html">Compra</a>
                <a href="Usuario.html">
                    <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" class="icono">
                        <path d="M541.33-693.33V-760H880v66.67H541.33Zm0 160V-600H880v66.67H541.33Zm0 160V-440H880v66.67H541.33ZM320-402q-50.67 0-84.67-34t-34-84.67q0-50.66 34-84.66t84.67-34q50.67 0 84.67 34t34 84.66q0 50.67-34 84.67T320-402ZM80-160v-69.33q0-19.58 9.33-37.29 9.34-17.71 25.34-26.05 45-30.33 97.5-45.16 52.5-14.84 107.83-14.84t107.5 15.84q52.17 15.83 97.83 44.16 15.34 10.34 25 27Q560-249 560-229.33V-160H80Zm65.33-74v7.33h349.34V-234Q457-258 410-272t-90-14q-43 0-90.33 14-47.34 14-84.34 38ZM320-468.67q23 0 37.5-14.5t14.5-37.5q0-23-14.5-37.5t-37.5-14.5q-23 0-37.5 14.5t-14.5 37.5q0 23 14.5 37.5t37.5 14.5Zm0-52Zm0 294Z"/>
                    </svg>
                </a>
                <svg xmlns="http://www.w3.org/2000/svg" height="27px" viewBox="0 -960 960 960" width="27px"
                    fill="#000000" class="icono" id="iconoCarrito" onclick="abrirCarrito()">
                    <path
                        d="M440-600v-120H320v-80h120v-120h80v120h120v80H520v120h-80ZM280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM40-800v-80h131l170 360h280l156-280h91L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68.5-39t-1.5-79l54-98-144-304H40Z" />
                </svg>

            </div>
        </div>
    </header>
                                    <!-- -->
    <!-- Sidebar carrito -->
    <div id="sidebarCarrito" class="offcanvas offcanvas-end" tabindex="-1" aria-labelledby="sidebarCarritoLabel">
        <div class="offcanvas-header"> <!--El header del panel lateral(offcanvas)-->
            <h2 class="offcanvas-title" id="sidebarCarritoLabel">Tu Carrito</h2>
           <!-- El boton que cierra el panel -->
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
        </div>
        <div class="offcanvas-body">
            <!-- CUANDO EL CARRITO TIENE PRODUCTOS -->
            <div id="contenidoProductos" class="contenido-productos d-none"> <!--Seccion ocultada por defecto con d-none se activa con js con su id -->
                <div id="lista-Productos" class="mb-3"></div> <!--Aqui se mostraran los productos dinamicamnte -->
                <div class="card bg-white border-0 shadow-none">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <span>Total:</span>
                            <strong id="totalCarrito">S/0.00</strong>
                        </div>
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-danger" onclick="vaciarCarrito()">Vaciar carrito</button>
                            <button class="btn btn-outline-secondary" data-bs-dismiss="offcanvas">Seguir comprando</button>
                            <button class="btn btn-success" onclick="realizarPedido()">Realizar pedido</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- CUANDO EL CARRITO ESTÁ VACÍO -->
            <div id="carritoVacio" class="carrito-vacio">
                <p class="text-center">Tu carrito de compras está vacío</p>
                <div class="d-grid">
                    <button class="btn btn-outline-secondary" data-bs-dismiss="offcanvas">Seguir comprando</button>
                </div>
            </div>
        </div>
    </div>
    
    <main>
        <section class="container my-5">
        <h1 class="text-center mb-4">Nuestro Menú</h1>
        
        <!-- Mensaje de carga -->
        <div id="cargando-productos" class="text-center my-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
            <p class="mt-2">Cargando productos...</p>
        </div>
        
        <!-- Contenedor dinámico para los productos -->
        <div id="productos-container" class="row row-cols-1 row-cols-md-3 g-4">
            <!-- Los productos se cargarán dinámicamente aquí -->
        </div>
    </section>
    </main>

    <!-- Modal de Opciones del Producto -->
    <div class="modal fade" id="modalOpciones" tabindex="-1" aria-labelledby="modalOpcionesLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalOpcionesLabel">Personaliza tu pedido</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <!-- Nombre del producto -->
                    <h4 id="nombreProductoModal" class="text-center mb-3"></h4>
                    
                    <!-- Opciones de Tamaño -->
                    <h6 class="fw-bold">Selecciona un tamaño:</h6>
                    <div id="cargandoTamanios" class="text-center my-2">
                        <div class="spinner-border spinner-border-sm" role="status">
                            <span class="visually-hidden">Cargando...</span>
                        </div>
                    </div>
                    <div id="opcionesTamanios" class="list-group mb-3">
                        <!-- Se carga dinámicamente -->
                    </div>
                    
                    <!-- Opciones de Extras -->
                    <h6 class="fw-bold">Extras (opcional):</h6>
                    <div id="cargandoExtras" class="text-center my-2 d-none">
                        <div class="spinner-border spinner-border-sm" role="status">
                            <span class="visually-hidden">Cargando...</span>
                        </div>
                    </div>
                    <div id="opcionesExtras" class="list-group mb-3">
                        <!-- Se carga dinámicamente -->
                    </div>
                    
                    <!-- Cantidad -->
                    <h6 class="fw-bold">Cantidad:</h6>
                    <div class="d-flex align-items-center justify-content-center mb-3">
                        <button type="button" class="btn btn-outline-secondary" id="btnRestarCantidad">-</button>
                        <input type="number" id="cantidadProducto" class="form-control text-center mx-2" value="1" min="1" style="width: 70px;" readonly>
                        <button type="button" class="btn btn-outline-secondary" id="btnSumarCantidad">+</button>
                    </div>
                    
                    <!-- Precio Final -->
                    <div class="text-center">
                        <h5>Total: <span id="precioFinalModal" class="text-success fw-bold">S/0.00</span></h5>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnAgregarAlCarrito">Agregar al Carrito</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS primero -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>
    <!-- Luego los scripts personalizados -->
    <script src="../js/Carrito/carrito.js"></script>
    <script src="../js/Menu/Menu.js"></script>

    <footer>
        <div class="row">
            <div class="col-12 col-md-4">
                <div class="container-fluid text-center">
                    <img src="../Imagenes/pizza.png" class="img-fluid" style="height: 6rem;"><br>
                    <h3>"Disfruta de la mejor masa artesanal y la mejor mozarella arequipeña."</h3>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="row">
                    <div class="col-12">
                        <h2>Contáctanos</h2>
                        <ul class="list-group">
                            <li class="list-group-item"><a href="https://www.facebook.com/nonnas.pizzas"
                                    target="_blank">Facebook</a></li>
                            <li class="list-group-item"><a href="https://wa.me/51970481555" target="_blank">Chatea por
                                    WhatsApp</a></li>
                            <li class="list-group-item"><a href="tel:+5117932164">Llámanos al (01) 793-2164</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="col-12">
                    <h2>Ubícanos</h2>
                    <ul class="list-group">
                        <li class="list-group-item">
                            <a href="https://www.google.com/maps/dir/-12.0515179,-77.0219014/Nonna's+Pizza,+Avenida+Los+Olivos,+San+Mart%C3%ADn+de+Porres/@-12.0181663,-77.095315,15010m/data=!3m2!1e3!4b1!4m9!4m8!1m1!4e1!1m5!1m1!1s0x9105cfead9755243:0xb45b0ebb1c30ada0!2m2!1d-77.0891612!2d-11.986492?entry=ttu"
                                target="_blank">San Martin de Porres</a>
                        </li>
                        <li class="list-group-item">
                            <a href="https://www.google.com/maps?q=-12.0515179,-77.0219014" target="_blank">Los
                                Olivos</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>